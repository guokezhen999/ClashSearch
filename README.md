# ClashSearch: 《部落冲突》数据管理与分析桌面应用

ClashSearch 是一款基于 Python 和 PyQt6 开发的功能强大的《部落冲突》(Clash of Clans) 数据查询与管理桌面应用。它通过调用官方API获取实时数据，并利用本地MySQL数据库进行持久化存储，实现了对玩家和部落的深度追踪与可视化分析。

## 📸 应用截图

*(请在此处替换为你的应用截图，建议展示主界面、玩家详情和数据图表)*

| 主界面 | 玩家详情 | 数据图表 |
| :---: | :---: | :---: |
| ![主界面截图](...) | ![玩家详情截图](...) | ![数据图表截图](...) |

## ✨ 主要功能

### 1. 深度信息查询与管理

- **多维度玩家管理**:
  - **我的玩家**: 管理您自己的游戏账号，支持绑定邮箱、日期等私有信息。
  - **关注玩家**: 追踪任何您感兴趣的玩家，监控其发展动态。
  - **脚本号管理**: 单独管理和更新大量脚本账号，并支持从文本文件批量导入。
- **全方位部落追踪**:
  - **部落管理**: 添加并管理您关心的部落，一览部落核心数据。
  - **成员洞察**: 快速查看部落内所有成员的详细信息。
  - **部落战分析**: 实时查看部落战与联赛的对战详情，包括双方成员的攻击情况、星数和摧毁率。
  - **历史战绩**: 浏览并分析部落的完整对战日志。

### 2. 本地化数据与每日快照

- **数据持久化**: 所有关注的玩家和部落数据均存储在本地 **MySQL** 数据库中，访问迅速且数据安全。
- **每日数据快照**: 系统每日会自动更新并创建数据快照，完整记录玩家和部落在每一天的状态，为历史数据分析提供坚实基础。

### 3. 强大的数据可视化

- **自定义图表生成**: 您可以选择任意数量的玩家和多达数十个数据项（如奖杯、英雄等级、资源掠夺、成就等）。
- **历史趋势分析**: 应用会根据每日快照数据，利用 **Matplotlib** 动态生成清晰的数据变化趋势图，帮助您直观地分析玩家的发展轨迹。

### 4. 高度灵活的自定义视图

- **按需显示**: 用户可以自由勾选要在表格中显示的数据列，从基本信息到具体的英雄、兵种、法术、宠物、装备等级，甚至各项成就数据，实现完全个性化的数据视图。

## 🛠️ 技术栈

- **GUI 框架**: **PyQt6**
- **核心语言**: **Python 3**
- **异步处理**: **asyncio** & **qasync**
  - 用于处理与API的异步网络请求，确保GUI界面的流畅与响应。
- **API 交互**: **coc.py**
  - 一个功能强大的异步库，用于与《部落冲突》官方API进行通信。
- **数据库**: **MySQL**
  - 通过 **PyMySQL** 驱动进行连接，负责所有数据的持久化存储。
- **数据可视化**: **Matplotlib**
  - 用于根据历史数据动态生成分析图表。

## ⚙️ 快速上手

1.  **环境配置**:
    - 确保已安装 Python 3.8+ 和 MySQL 数据库。
    - 从 [Clash of Clans Developer Portal](https://developer.clashofclans.com/) 获取API密钥。

2.  **安装依赖**:
    ```bash
    pip install coc.py "coc.py[speedup]" PyQt6 qasync pymysql matplotlib requests
    ```

3.  **配置信息**:
    - 修改 `Accounts/AccountInfo.py` 文件，填入你的API密钥和数据库连接信息。
    - **安全提示**: 建议将此文件加入 `.gitignore`，避免泄露个人凭证。

4.  **运行应用**:
    ```bash
    python Main.py
    ```

## 📂 项目结构

```
ClashSearch/
│
├── Accounts/          # 封装认证、API交互和数据库逻辑
├── BasicData/         # 存放游戏内物品、数据字段等静态常量
├── LocalClasses/      # 本地化的数据模型类
├── MakeFigs/          # 数据可视化图表生成模块
├── ShowDialogs/       # 各类交互对话框 (添加/编辑/选择)
├── ShowForms/         # 各类详情展示窗口 (玩家/部落/对战)
├── ShowTables/        # 主界面表格的渲染与管理模块
├── UI/                # 由 .ui 文件生成的界面布局代码
├── pictures/          # 应用图标和图片资源
│
├── ClashSearch.py     # 主窗口核心应用逻辑
└── Main.py            # 程序入口
```

## 代码仓库
https://github.com/guokezhen999/ClashSearch